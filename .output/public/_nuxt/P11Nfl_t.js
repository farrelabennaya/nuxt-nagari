import{A as k}from"./Dl1Rth-w.js";import{_ as v}from"./CrH4gh9h.js";import{_ as y,a as j}from"./DH8iKwkT.js";import{j as K,l as h,m as C,c,b as l,a as e,n as A,w as S,t as _,x as g,o as u,d as T}from"./ymCw7azN.js";import{u as V}from"./2TKp5wxK.js";import"./DlAUqK2U.js";import"./CPXeGkS5.js";const B={class:"flex overflow-hidden bg-white pt-16"},N={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto sm:ml-64"},M=e("main",null,[e("div",{class:"pt-6 px-4 ml-5 mr-5"},[e("h1",{class:"text-lg font-bold mb-4"},"Create Keluarga")])],-1),D={class:"min-h-screen flex"},E={class:"w-full"},J={class:"card bg-white p-10 rounded-lg shadow-md md:w-3/5 mx-auto lg:w-1/3"},$=e("h3",{class:"text-center text-2xl font-semibold"},"Keluarga Data",-1),q={class:"mb-5"},F={key:0,class:"text-red-500"},H=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-1 mb-2"}," Add Keluarga ",-1),L={key:0,id:"toast-success",class:"fixed bottom-4 right-4 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow",role:"alert"},O=e("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg"},[e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414Z"})]),e("span",{class:"sr-only"},"Check icon")],-1),R={class:"ml-3 text-sm font-normal"},Z=e("span",{class:"sr-only"},"Close",-1),z=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),I=[Z,z],te={__name:"create",setup(P){const p=V(),f=K(),a=h({jumlah_kk:""}),r=C([]),o=h({show:!1,message:""}),m=n=>{o.message=n,o.show=!0,setTimeout(()=>{o.show=!1},3e3)},w=async()=>{r.value={};const n=p.getToken;try{const t=await fetch("http://laravel-api.test/api/keluargas",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(a)});if(!t.ok){const s=await t.json();throw s.errors&&(r.value=s.errors),new Error("Error creating Keluarga: "+s.message)}const i=await t.json();m("Keluarga created successfully!"),setTimeout(()=>{f.push({path:"/admin/nagari/anggotaKeluarga/createKepalaKeluarga",query:{keluarga_id:i.id,jumlah_kk:a.jumlah_kk}})},1500)}catch(t){console.error("Request failed:",t),m(t.message)}};return(n,t)=>{const i=k,s=v,x=y,b=j;return u(),c("div",null,[l(i),e("div",B,[l(s),e("div",N,[M,e("div",D,[e("div",E,[e("div",J,[$,e("form",{onSubmit:A(w,["prevent"]),class:"max-w-sm mx-auto"},[e("div",q,[l(x,{for:"jumlah_kk"},{default:S(()=>[T("Jumlah KK")]),_:1}),l(b,{id:"jumlah_kk",type:"number",placeholder:"Jumlah KK",modelValue:a.jumlah_kk,"onUpdate:modelValue":t[0]||(t[0]=d=>a.jumlah_kk=d),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,8,["modelValue"]),r.value.jumlah_kk?(u(),c("span",F,_(r.value.jumlah_kk[0]),1)):g("",!0)]),H],32)])])])])]),o.show?(u(),c("div",L,[O,e("div",R,_(o.message),1),e("button",{onClick:t[1]||(t[1]=d=>o.show=!1),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8","aria-label":"Close"},I)])):g("",!0)])}}};export{te as default};
