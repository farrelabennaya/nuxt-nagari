import{A as C}from"./Dl1Rth-w.js";import{_ as T}from"./CrH4gh9h.js";import{j as D,k as M,l as b,m as x,f as B,c as n,b as w,a as t,r as V,n as I,q as g,v as N,F as E,s as J,t as u,x as _,y as v,o as i,p as R,e as q}from"./ymCw7azN.js";import{u as L}from"./2TKp5wxK.js";import{_ as U}from"./DlAUqK2U.js";import"./CPXeGkS5.js";const s=m=>(R("data-v-0446a1c5"),m=m(),q(),m),$={class:"flex overflow-hidden bg-white pt-16"},F={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto sm:ml-64"},H={class:"pt-6 px-4 ml-5 mr-5"},K=s(()=>t("h1",{class:"text-lg font-bold mb-4"},"Create Alamat",-1)),O={class:"min-h-screen flex"},Z={class:"w-full"},z={class:"card bg-white p-10 rounded-lg shadow-md md:w-3/5 mx-auto lg:w-1/3"},P=s(()=>t("h3",{class:"text-center text-2xl font-semibold"},"Alamat Data",-1)),G={class:"mb-5"},Q=s(()=>t("label",{for:"jorong_id",class:"block text-sm font-medium text-gray-700"},"Jorong ID",-1)),W=s(()=>t("option",{value:""},"Select Jorong",-1)),X=["value"],Y={key:0,class:"text-red-500"},tt={class:"mb-5"},et=s(()=>t("label",{for:"detail_alamat",class:"block text-sm font-medium text-gray-700"},"Detail Alamat",-1)),ot={key:0,class:"text-red-500"},st={class:"mb-5"},at=s(()=>t("label",{for:"titik_koordinat",class:"block text-sm font-medium text-gray-700"},"Titik Koordinat",-1)),rt={key:0,class:"text-red-500"},lt=s(()=>t("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-1 mb-2"}," Add Alamat ",-1)),nt={key:0,id:"toast-success",class:"fixed bottom-4 right-4 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow",role:"alert"},it=s(()=>t("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg"},[t("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414Z"})]),t("span",{class:"sr-only"},"Check icon")],-1)),dt={class:"ml-3 text-sm font-normal"},ct=s(()=>t("span",{class:"sr-only"},"Close",-1)),ut=s(()=>t("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),mt=[ct,ut],_t={__name:"create",setup(m){const y=L(),k=D(),j=M(),l=b({keluarga_id:j.query.keluarga_id||"",jorong_id:"",detail_alamat:"",titik_koordinat:""}),a=x([]),d=b({show:!1,message:""}),p=x([]),h=r=>{d.message=r,d.show=!0,setTimeout(()=>{d.show=!1},3e3)},A=async()=>{try{const e=await(await fetch("http://laravel-api.test/api/jorongs")).json();p.value=e}catch(r){console.error("Error fetching jorong:",r)}},S=async()=>{a.value={};const r=y.getToken;try{const e=await fetch("http://laravel-api.test/api/alamats",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(l)});if(!e.ok){const c=await e.json();throw c.errors&&(a.value=c.errors),new Error("Error creating Alamat: "+c.message)}const f=await e.json();h("Alamat and Rumah created successfully!"),setTimeout(()=>{k.push("/admin/nagari/keluarga")},1500)}catch(e){console.error("Request failed:",e),h(e.message)}};return B(A),(r,e)=>{const f=C,c=T;return i(),n("div",null,[w(f),t("div",$,[w(c),t("div",F,[t("main",null,[t("div",H,[K,V(r.$slots,"default",{},void 0,!0)])]),t("div",O,[t("div",Z,[t("div",z,[P,t("form",{onSubmit:I(S,["prevent"]),class:"max-w-sm mx-auto"},[t("div",G,[Q,g(t("select",{id:"jorong_id","onUpdate:modelValue":e[0]||(e[0]=o=>l.jorong_id=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[W,(i(!0),n(E,null,J(p.value,o=>(i(),n("option",{key:o.id,value:o.id},u(o.name),9,X))),128))],512),[[N,l.jorong_id]]),a.value.jorong_id?(i(),n("span",Y,u(a.value.jorong_id[0]),1)):_("",!0)]),t("div",tt,[et,g(t("input",{id:"detail_alamat",type:"text",placeholder:"Detail Alamat","onUpdate:modelValue":e[1]||(e[1]=o=>l.detail_alamat=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[v,l.detail_alamat]]),a.value.detail_alamat?(i(),n("span",ot,u(a.value.detail_alamat[0]),1)):_("",!0)]),t("div",st,[at,g(t("input",{id:"titik_koordinat",type:"text",placeholder:"Titik Koordinat","onUpdate:modelValue":e[2]||(e[2]=o=>l.titik_koordinat=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[v,l.titik_koordinat]]),a.value.titik_koordinat?(i(),n("span",rt,u(a.value.titik_koordinat[0]),1)):_("",!0)]),lt],32)])])])])]),d.show?(i(),n("div",nt,[it,t("div",dt,u(d.message),1),t("button",{onClick:e[3]||(e[3]=o=>d.show=!1),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8","aria-label":"Close"},mt)])):_("",!0)])}}},wt=U(_t,[["__scopeId","data-v-0446a1c5"]]);export{wt as default};
