import{A}from"./Dl1Rth-w.js";import{_ as j}from"./CrH4gh9h.js";import{_ as R}from"./DMCHgHeb.js";import{m,l as b,f as L,c as u,b as y,a as e,t as w,x as k,r as T,F as I,s as N,o as g,p as D,e as F}from"./ymCw7azN.js";import{a as C}from"./2TKp5wxK.js";import{_ as Z}from"./DlAUqK2U.js";import"./CPXeGkS5.js";const $={components:{AppHeader:A,SidebarAdmin:j},setup(){const t=m([]),l=m(0),p=m(!1),s=m(!1),r=b({id:"",alamat_id:""}),f=m([]),d=m(!1),h=b({message:"",show:!1}),_=async()=>{try{const o=await(await fetch("http://laravel-api.test/api/rumahs")).json();Array.isArray(o)?(l.value=0,t.value=o.map(n=>({...n,number:++l.value}))):console.error("Invalid data format",o)}catch(a){console.error("Error fetching rumah:",a)}};L(_);const c=a=>{r.id=a.id,r.alamat_id=a.alamat_id,p.value=!0},S=async()=>{const a=C();f.value=[],d.value=!0;try{const o=await fetch(`http://laravel-api.test/api/rumahs/${r.id}`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${a.getToken}`},body:JSON.stringify({alamat_id:r.alamat_id})}),n=await o.json();if(o.ok){const x=t.value.findIndex(E=>E.id===r.id);x!==-1&&(t.value[x]={...n.rumah,number:t.value[x].number}),p.value=!1,v("Rumah berhasil diedit!"),await _()}else if(n.errors)f.value=n.errors;else throw new Error(n.message||"Gagal mengedit rumah")}catch(o){console.error("Kesalahan mengedit rumah:",o)}finally{d.value=!1}},M=a=>{r.id=a,s.value=!0},B=async()=>{const a=C();d.value=!0;try{const o=await fetch(`http://laravel-api.test/api/rumahs/${r.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.getToken}`}});if(!o.ok){const n=await o.json();throw new Error(n.message||"Gagal menghapus rumah")}t.value=t.value.filter(n=>n.id!==r.id),v("Rumah berhasil dihapus!"),s.value=!1}catch(o){console.error("Kesalahan menghapus rumah:",o)}finally{d.value=!1}},v=a=>{h.message=a,h.show=!0,setTimeout(()=>h.show=!1,3e3)};return{rumahList:t,counter:l,isEditModalOpen:p,isDeleteModalOpen:s,editForm:r,errors:f,isLoading:d,notification:h,openEditModal:c,confirmDeleteRumah:M,editRumah:S,deleteRumah:B}}},i=t=>(D("data-v-f34c9609"),t=t(),F(),t),O={class:"flex overflow-hidden bg-white pt-16"},V={key:0,id:"toast-success",class:"fixed bottom-4 right-4 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},z=i(()=>e("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"},[e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})]),e("span",{class:"sr-only"},"Check icon")],-1)),G={class:"ml-3 text-sm font-normal"},H=i(()=>e("span",{class:"sr-only"},"Close",-1)),K=i(()=>e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),J=[H,K],P={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto sm:ml-64"},Q={class:"pt-6 px-4 ml-5 mr-5"},U=i(()=>e("h1",{class:"text-lg font-bold mb-4"},"Data Rumah",-1)),q=i(()=>e("tr",null,[e("td")],-1)),W={class:"relative overflow-x-auto ml-5 mr-5"},X={class:"w-full text-sm text-left text-gray-500 rtl:text-right dark:text-gray-400"},Y=i(()=>e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"No"),e("th",{scope:"col",class:"px-6 py-3"},"Alamat"),e("th",{scope:"col",class:"px-6 py-3"},"QR Code")])],-1)),ee={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},te={class:"px-6 py-4"},ae=i(()=>e("td",{class:"px-6 py-4"},null,-1)),oe={key:0,id:"toast-success",class:"fixed bottom-4 right-4 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800",role:"alert"},se=i(()=>e("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"},[e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})]),e("span",{class:"sr-only"},"Check icon")],-1)),re={class:"ml-3 text-sm font-normal"},ne=i(()=>e("span",{class:"sr-only"},"Close",-1)),ie=i(()=>e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),le=[ne,ie];function de(t,l,p,s,r,f){const d=A,h=j,_=R;return g(),u("div",null,[y(d),e("div",O,[s.notification.show?(g(),u("div",V,[z,e("div",G,w(s.notification.message),1),e("button",{onClick:l[0]||(l[0]=c=>s.notification.show=!1),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","aria-label":"Close"},J)])):k("",!0),y(h),e("div",P,[e("main",null,[e("div",Q,[U,q,T(t.$slots,"default",{},void 0,!0)])]),e("div",W,[e("table",X,[Y,e("tbody",null,[(g(!0),u(I,null,N(s.rumahList,c=>(g(),u("tr",{key:c.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("th",ee,w(c.number),1),e("td",te,w(c.alamat.detail_alamat),1),ae]))),128))])])]),s.notification.show?(g(),u("div",oe,[se,e("div",re,w(s.notification.message),1),e("button",{onClick:l[1]||(l[1]=c=>s.notification.show=!1),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","aria-label":"Close"},le)])):k("",!0),y(_)])])])}const _e=Z($,[["render",de],["__scopeId","data-v-f34c9609"]]);export{_e as default};
