import{A as S}from"./Dl1Rth-w.js";import{_ as V}from"./CrH4gh9h.js";import{j as C,l as g,m as D,c as n,b as y,a as e,x as d,n as U,q as i,y as u,t as m,v,F as M,s as P,o as r,p as T,e as A}from"./ymCw7azN.js";import{_ as j}from"./DlAUqK2U.js";import"./2TKp5wxK.js";import"./CPXeGkS5.js";const l=h=>(T("data-v-57004f83"),h=h(),A(),h),K={class:"flex overflow-hidden bg-white pt-16"},L={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto sm:ml-64"},N={class:"pt-6 px-4 ml-5 mr-5"},B=l(()=>e("h1",{class:"text-lg font-bold mb-4"},"Tambah Data Warga",-1)),E={key:0,class:"text-center mb-4"},I=l(()=>e("h2",{class:"text-xl font-bold"},"QR Code",-1)),J=["src"],q={class:"mb-4"},F=l(()=>e("label",{for:"name",class:"form-label"},"Nama",-1)),H={key:0,class:"text-red-500"},O={class:"mb-4"},R=l(()=>e("label",{for:"birthPlace",class:"form-label"},"Tempat Lahir",-1)),Q={key:0,class:"text-red-500"},$={class:"mb-4"},W=l(()=>e("label",{for:"birthDate",class:"form-label"},"Tanggal Lahir",-1)),z={key:0,class:"text-red-500"},G={class:"mb-4"},X=l(()=>e("label",{for:"gender",class:"form-label"},"Jenis Kelamin",-1)),Y=l(()=>e("option",{value:"male"},"Laki-Laki",-1)),Z=l(()=>e("option",{value:"female"},"Perempuan",-1)),ee=[Y,Z],te={key:0,class:"text-red-500"},ae={class:"mb-4"},se=l(()=>e("label",{for:"address",class:"form-label"},"Alamat",-1)),oe={key:0,class:"text-red-500"},le={class:"mb-4"},ne=l(()=>e("label",{for:"religion",class:"form-label"},"Agama",-1)),re={key:0,class:"text-red-500"},ie={class:"mb-4"},de=l(()=>e("label",{for:"maritalStatus",class:"form-label"},"Status Perkawinan",-1)),me=l(()=>e("option",{value:"single"},"Belum Kawin",-1)),ue=l(()=>e("option",{value:"married"},"Kawin",-1)),ce=l(()=>e("option",{value:"divorced"},"Cerai",-1)),pe=[me,ue,ce],he={key:0,class:"text-red-500"},_e={class:"mb-4"},be=l(()=>e("label",{for:"householdCount",class:"form-label"},"Jumlah KK",-1)),fe={key:0,class:"text-red-500"},ge={class:"form-label"},ye=["onUpdate:modelValue"],ve=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],ke={key:0,class:"text-red-500"},we=l(()=>e("button",{type:"submit",class:"btn-primary"},"Simpan",-1)),Se={__name:"add",setup(h){C();const t=g({name:"",birthPlace:"",birthDate:"",gender:"male",address:"",religion:"",maritalStatus:"single",householdCount:1,familyMembers:[{name:"",birthDate:"",relation:""}]}),s=g({}),f=D(""),x=()=>{t.familyMembers.length<t.householdCount?t.familyMembers.push({name:"",birthDate:"",relation:""}):alert(`Jumlah anggota keluarga tidak boleh melebihi ${t.householdCount}`)},k=async()=>{s.value={};try{const c=await fetch("http://laravel-api.test/api/warga",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!c.ok){const _=await c.json();throw _.errors&&Object.assign(s,_.errors),new Error("Error in response")}const o=await c.json();f.value=`http://laravel-api.test/storage/${o.qr_code}`,alert("Data warga berhasil disimpan!")}catch(c){console.error("Error:",c),alert("Terjadi kesalahan saat menyimpan data.")}};return(c,o)=>{const _=S,w=V;return r(),n("div",null,[y(_),e("div",K,[y(w),e("div",L,[e("main",null,[e("div",N,[B,f.value?(r(),n("div",E,[I,e("img",{src:f.value,alt:"QR Code",class:"mx-auto"},null,8,J)])):d("",!0),e("form",{onSubmit:U(k,["prevent"]),class:"max-w-lg mx-auto bg-white p-8 shadow rounded"},[e("div",q,[F,i(e("input",{id:"name",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>t.name=a),class:"form-input"},null,512),[[u,t.name]]),s.name?(r(),n("span",H,m(s.name),1)):d("",!0)]),e("div",O,[R,i(e("input",{id:"birthPlace",type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>t.birthPlace=a),class:"form-input"},null,512),[[u,t.birthPlace]]),s.birthPlace?(r(),n("span",Q,m(s.birthPlace),1)):d("",!0)]),e("div",$,[W,i(e("input",{id:"birthDate",type:"date","onUpdate:modelValue":o[2]||(o[2]=a=>t.birthDate=a),class:"form-input"},null,512),[[u,t.birthDate]]),s.birthDate?(r(),n("span",z,m(s.birthDate),1)):d("",!0)]),e("div",G,[X,i(e("select",{id:"gender","onUpdate:modelValue":o[3]||(o[3]=a=>t.gender=a),class:"form-input"},ee,512),[[v,t.gender]]),s.gender?(r(),n("span",te,m(s.gender),1)):d("",!0)]),e("div",ae,[se,i(e("input",{id:"address",type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>t.address=a),class:"form-input"},null,512),[[u,t.address]]),s.address?(r(),n("span",oe,m(s.address),1)):d("",!0)]),e("div",le,[ne,i(e("input",{id:"religion",type:"text","onUpdate:modelValue":o[5]||(o[5]=a=>t.religion=a),class:"form-input"},null,512),[[u,t.religion]]),s.religion?(r(),n("span",re,m(s.religion),1)):d("",!0)]),e("div",ie,[de,i(e("select",{id:"maritalStatus","onUpdate:modelValue":o[6]||(o[6]=a=>t.maritalStatus=a),class:"form-input"},pe,512),[[v,t.maritalStatus]]),s.maritalStatus?(r(),n("span",he,m(s.maritalStatus),1)):d("",!0)]),e("div",_e,[be,i(e("input",{id:"householdCount",type:"number","onUpdate:modelValue":o[7]||(o[7]=a=>t.householdCount=a),class:"form-input"},null,512),[[u,t.householdCount]]),s.householdCount?(r(),n("span",fe,m(s.householdCount),1)):d("",!0)]),(r(!0),n(M,null,P(t.familyMembers,(a,b)=>(r(),n("div",{key:b,class:"mb-4"},[e("h3",ge,"Anggota Keluarga "+m(b+1),1),i(e("input",{type:"text","onUpdate:modelValue":p=>a.name=p,placeholder:"Nama",class:"form-input mb-2"},null,8,ye),[[u,a.name]]),i(e("input",{type:"date","onUpdate:modelValue":p=>a.birthDate=p,placeholder:"Tanggal Lahir",class:"form-input mb-2"},null,8,ve),[[u,a.birthDate]]),i(e("input",{type:"text","onUpdate:modelValue":p=>a.relation=p,placeholder:"Hubungan",class:"form-input"},null,8,xe),[[u,a.relation]]),s.familyMembers&&s.familyMembers[b]?(r(),n("span",ke,m(s.familyMembers[b]),1)):d("",!0)]))),128)),e("div",{class:"flex justify-between"},[e("button",{type:"button",onClick:x,class:"btn-primary"},"Tambah Anggota Keluarga"),we])],32)])])])])])}}},Te=j(Se,[["__scopeId","data-v-57004f83"]]);export{Te as default};
