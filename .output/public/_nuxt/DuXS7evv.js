import{A as N}from"./Dl1Rth-w.js";import{_ as C}from"./CrH4gh9h.js";import{j as O,k as V,l as K,m as y,f as R,c as l,b as P,a as e,n as J,q as c,y as p,t as i,x as d,v as _,F as k,s as h,o as r,p as H,e as $}from"./ymCw7azN.js";import{u as q}from"./2TKp5wxK.js";import{_ as F}from"./DlAUqK2U.js";import"./CPXeGkS5.js";const o=f=>(H("data-v-a8353e27"),f=f(),$(),f),z={class:"flex overflow-hidden bg-white pt-16"},G={id:"main-content",class:"h-full w-full bg-gray-50 relative overflow-y-auto sm:ml-64"},Z=o(()=>e("main",null,[e("div",{class:"pt-6 px-4 ml-5 mr-5"},[e("h1",{class:"text-lg font-bold mb-4"},"Create Kepala Keluarga")])],-1)),W={class:"min-h-screen flex"},Y={class:"w-full"},Q={class:"card bg-white p-10 rounded-lg shadow-md md:w-3/5 mx-auto lg:w-1/3"},X=o(()=>e("h3",{class:"text-center text-2xl font-semibold"}," Form Data Kepala Keluarga ",-1)),ee={class:"mb-5"},ae=o(()=>e("label",{for:"keluarga_id",class:"block text-sm font-medium text-gray-700"},"Keluarga ID",-1)),te={key:0,class:"text-red-500"},se={class:"mb-5"},oe=o(()=>e("label",{for:"nama",class:"block text-sm font-medium text-gray-700"},"Nama",-1)),ne={key:0,class:"text-red-500"},le={class:"mb-5"},re=o(()=>e("label",{for:"nik",class:"block text-sm font-medium text-gray-700"},"NIK",-1)),ie={key:0,class:"text-red-500"},ue={class:"mb-5"},de=o(()=>e("label",{for:"tempat_lahir",class:"block text-sm font-medium text-gray-700"},"Tempat Lahir",-1)),ce={key:0,class:"text-red-500"},me={class:"mb-5"},ge=o(()=>e("label",{for:"tanggal_lahir",class:"block text-sm font-medium text-gray-700"},"Tanggal Lahir",-1)),pe={key:0,class:"text-red-500"},be={class:"mb-5"},_e=o(()=>e("label",{for:"agama",class:"block text-sm font-medium text-gray-700"},"Agama",-1)),ke=o(()=>e("option",{disabled:"",value:""},"Pilih Agama",-1)),he=["value"],fe={key:0,class:"text-red-500"},xe={class:"mb-5"},ye=o(()=>e("label",{for:"jenis_kelamin",class:"block text-sm font-medium text-gray-700"},"Jenis Kelamin",-1)),ve=o(()=>e("option",{disabled:"",value:""},"Pilih Jenis Kelamin",-1)),we=["value"],Ae={key:0,class:"text-red-500"},Te={class:"mb-5"},Ke=o(()=>e("label",{for:"pendidikan",class:"block text-sm font-medium text-gray-700"},"Pendidikan",-1)),Pe=o(()=>e("option",{disabled:"",value:""},"Pilih Pendidikan",-1)),Ie=["value"],Se={key:0,class:"text-red-500"},je={class:"mb-5"},Be=o(()=>e("label",{for:"pekerjaan",class:"block text-sm font-medium text-gray-700"},"Pekerjaan",-1)),Me=o(()=>e("option",{disabled:"",value:""},"Pilih Pekerjaan",-1)),De=["value"],Ee={key:0,class:"text-red-500"},Ue={class:"mb-5"},Le=o(()=>e("label",{for:"status_perkawinan",class:"block text-sm font-medium text-gray-700"},"Status Perkawinan",-1)),Ne=o(()=>e("option",{disabled:"",value:""},"Pilih Status Perkawinan",-1)),Ce=["value"],Oe={key:0,class:"text-red-500"},Ve={class:"mb-5"},Re=o(()=>e("label",{for:"hubungan_keluarga",class:"block text-sm font-medium text-gray-700"},"Hubungan Keluarga",-1)),Je=o(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2"}," Add Kepala Keluarga ")],-1)),He={key:0,id:"toast-success",class:"fixed bottom-4 right-4 flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-white rounded-lg shadow",role:"alert"},$e=o(()=>e("div",{class:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-500 bg-green-100 rounded-lg"},[e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414Z"})]),e("span",{class:"sr-only"},"Check icon")],-1)),qe={class:"ml-3 text-sm font-normal"},Fe=o(()=>e("span",{class:"sr-only"},"Close",-1)),ze=o(()=>e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),Ge=[Fe,ze],Ze={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},We={class:"bg-white p-6 rounded-lg shadow-lg"},Ye=o(()=>e("h2",{class:"text-xl font-semibold mb-4"}," Apakah Anda Yakin Untuk Melakukan Konfirmasi? ",-1)),Qe=o(()=>e("p",{class:"mb-4"},"Pastikan Semua Data Benar",-1)),Xe={class:"flex justify-end"},ea={__name:"create",setup(f){const v=q(),w=O(),I=V(),s=K({keluarga_id:I.query.keluarga_id||"",nama:"",nik:"",tempat_lahir:"",tanggal_lahir:"",agama:"",jenis_kelamin:"",pendidikan:"",pekerjaan:"",status_perkawinan:"",hubungan_keluarga:"Kepala Keluarga"}),n=y([]),A=y(!1),g=K({message:"",show:!1}),T=y(!1),S=["Islam","Kristen","Katolik","Hindu","Buddha","Khonghucu"],j=["Laki-laki","Perempuan"],B=["TIDAK / BELUM SEKOLAH","TAMAT SD / SEDERAJAT","SLTA / SEDERAJAT","SLTP/SEDERAJAT","BELUM TAMAT SD/SEDERAJAT","DIPLOMA IV/ STRATA I","DIPLOMA I / II","AKADEMI/ DIPLOMA III/S. MUDA","STRATA II","STRATA III"],M=["Belum Ditentukan","Belum/Tidak Bekerja","Pelajar/Mahasiswa","Mengurus Rumah Tangga","Buruh Harian Lepas","Buruh Peternakan","Buruh Tani/Perkebunan","Guru","Tentara Nasional Indonesia (TNI)","Kepolisian RI (POLRI)","Karyawan BUMD","Karyawan BUMN","Karyawan Honorer","Karyawan Swasta","Mekanik","Pedagang","Pegawai Negeri Sipil (PNS)","Pensiunan","Perancang Busana","Perawat","Perdagangan","Petani/Pekebun","Peternak","Sopir","Tabib","Transportasi","Tukang Batu","Tukang Cukur","Tukang Jahit","Tukang Kayu","Tukang Las/Pandai Besi","Wiraswasta"],D=["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"],E=u=>{for(const t in u.errors)u.errors.hasOwnProperty(t)&&(n.value[t]=u.errors[t])},x=u=>{g.message=u,g.show=!0,setTimeout(()=>{g.show=!1},3e3)},U=async u=>{const t=v.getToken;try{return(await(await fetch(`http://laravel-api.test/api/check-nik?nik=${u}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${t}`}})).json()).exists}catch(m){return console.error("Request failed:",m),!1}},L=async()=>{if(await U(s.nik)){x("NIK sudah ada"),n.value.nik=["NIK sudah ada"];return}const u=v.getToken;A.value=!0,n.value={};try{const t=await fetch("http://laravel-api.test/api/anggota_keluargas",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(s)}),m=await t.json();if(t.ok)await fetch(`http://laravel-api.test/api/keluargas/${s.keluarga_id}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({kepala_keluarga:m.id})}),x("Kepala Keluarga berhasil ditambahkan!"),Object.keys(s).forEach(b=>{b!=="keluarga_id"&&(s[b]="")}),setTimeout(()=>{w.push("/admin/nagari/keluarga")},1500);else if(m.errors)E(m);else throw new Error(m.message||"Gagal menambahkan Kepala Keluarga")}catch(t){console.error("Request failed:",t)}finally{A.value=!1}};return R(()=>{s.keluarga_id||(x("Keluarga ID tidak tersedia"),w.push("/admin/nagari/keluarga"))}),(u,t)=>{const m=N,b=C;return r(),l("div",null,[P(m),e("div",z,[P(b),e("div",G,[Z,e("div",W,[e("div",Y,[e("div",Q,[X,e("form",{onSubmit:J(L,["prevent"]),class:"max-w-sm mx-auto"},[e("div",ee,[ae,c(e("input",{id:"keluarga_id",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.keluarga_id=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",readonly:""},null,512),[[p,s.keluarga_id]]),n.value.keluarga_id?(r(),l("span",te,i(n.value.keluarga_id[0]),1)):d("",!0)]),e("div",se,[oe,c(e("input",{id:"nama","onUpdate:modelValue":t[1]||(t[1]=a=>s.nama=a),type:"text",class:"bg-gray-50 border border-gray-300 mt-2 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[p,s.nama]]),n.value.nama?(r(),l("span",ne,i(n.value.nama[0]),1)):d("",!0)]),e("div",le,[re,c(e("input",{id:"nik","onUpdate:modelValue":t[2]||(t[2]=a=>s.nik=a),type:"text",class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},null,512),[[p,s.nik]]),n.value.nik?(r(),l("span",ie,i(n.value.nik[0]),1)):d("",!0)]),e("div",ue,[de,c(e("input",{id:"tempat_lahir","onUpdate:modelValue":t[3]||(t[3]=a=>s.tempat_lahir=a),type:"text",class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},null,512),[[p,s.tempat_lahir]]),n.value.tempat_lahir?(r(),l("span",ce,i(n.value.tempat_lahir[0]),1)):d("",!0)]),e("div",me,[ge,c(e("input",{id:"tanggal_lahir","onUpdate:modelValue":t[4]||(t[4]=a=>s.tanggal_lahir=a),type:"date",class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},null,512),[[p,s.tanggal_lahir]]),n.value.tanggal_lahir?(r(),l("span",pe,i(n.value.tanggal_lahir[0]),1)):d("",!0)]),e("div",be,[_e,c(e("select",{id:"agama","onUpdate:modelValue":t[5]||(t[5]=a=>s.agama=a),class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},[ke,(r(),l(k,null,h(S,a=>e("option",{key:a,value:a},i(a),9,he)),64))],512),[[_,s.agama]]),n.value.agama?(r(),l("span",fe,i(n.value.agama[0]),1)):d("",!0)]),e("div",xe,[ye,c(e("select",{id:"jenis_kelamin","onUpdate:modelValue":t[6]||(t[6]=a=>s.jenis_kelamin=a),class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},[ve,(r(),l(k,null,h(j,a=>e("option",{key:a,value:a},i(a),9,we)),64))],512),[[_,s.jenis_kelamin]]),n.value.jenis_kelamin?(r(),l("span",Ae,i(n.value.jenis_kelamin[0]),1)):d("",!0)]),e("div",Te,[Ke,c(e("select",{id:"pendidikan","onUpdate:modelValue":t[7]||(t[7]=a=>s.pendidikan=a),class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},[Pe,(r(),l(k,null,h(B,a=>e("option",{key:a,value:a},i(a),9,Ie)),64))],512),[[_,s.pendidikan]]),n.value.pendidikan?(r(),l("span",Se,i(n.value.pendidikan[0]),1)):d("",!0)]),e("div",je,[Be,c(e("select",{id:"pekerjaan","onUpdate:modelValue":t[8]||(t[8]=a=>s.pekerjaan=a),class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},[Me,(r(),l(k,null,h(M,a=>e("option",{key:a,value:a},i(a),9,De)),64))],512),[[_,s.pekerjaan]]),n.value.pekerjaan?(r(),l("span",Ee,i(n.value.pekerjaan[0]),1)):d("",!0)]),e("div",Ue,[Le,c(e("select",{id:"status_perkawinan","onUpdate:modelValue":t[9]||(t[9]=a=>s.status_perkawinan=a),class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2"},[Ne,(r(),l(k,null,h(D,a=>e("option",{key:a,value:a},i(a),9,Ce)),64))],512),[[_,s.status_perkawinan]]),n.value.status_perkawinan?(r(),l("span",Oe,i(n.value.status_perkawinan[0]),1)):d("",!0)]),e("div",Ve,[Re,c(e("input",{id:"hubungan_keluarga","onUpdate:modelValue":t[10]||(t[10]=a=>s.hubungan_keluarga=a),type:"text",class:"block p-2.5 w-full text-sm text-gray-900 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 mt-2",readonly:""},null,512),[[p,s.hubungan_keluarga]])]),Je],32)])])])])]),g.show?(r(),l("div",He,[$e,e("div",qe,i(g.message),1),e("button",{onClick:t[11]||(t[11]=a=>g.show=!1),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8","aria-label":"Close"},Ge)])):d("",!0),T.value?(r(),l("div",Ze,[e("div",We,[Ye,Qe,e("div",Xe,[e("button",{onClick:t[12]||(t[12]=a=>T.value=!1),class:"text-white bg-gray-500 hover:bg-gray-600 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"}," Batal "),e("button",{onClick:t[13]||(t[13]=(...a)=>u.submitAllData&&u.submitAllData(...a)),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2"}," Konfirmasi ")])])])):d("",!0)])}}},ra=F(ea,[["__scopeId","data-v-a8353e27"]]);export{ra as default};
